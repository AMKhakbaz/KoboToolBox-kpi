{% extends "registration.html" %}
{% load static %}
{% load i18n %}
{% block content %}
  <form method="post" action="{% url 'mfa_token' %}" class="registration registration--login">
    <div class="registration--logo">
      <a href="/">
      {% block logo %}{{ block.super }}{% endblock %}
      </a>
    </div>
    {% csrf_token %}
    <p class="mfa-token--header"><b>{% trans "Please enter your verification token" %}</b></p>
    {{ form.as_p }}
    <div class="mfa-token--margin-bottom" data-js-selector="mfa-help-text-container">
      <a href="#" data-js-selector="mfa-help-text-toggle" class="registration__forgot">
        {% trans "Problems with your token?" %}
      </a>
      <span class="mfa-token--help-text hidden" data-js-selector="mfa-help-text">
        {{ mfa_help_text | safe }}
      </span>
    </div>
    <button type="submit" name="continue" class="kobo-button kobo-button--blue kobo-button--fullwidth">
      {% trans "Continue" %}
    </button>
    <input type="hidden" name="next" value="{{ next }}" />
  </form>
{% endblock %}
{% block extra_javascript %}
  <script>
    const container = document.querySelector('[data-js-selector="mfa-help-text-container"]');
    const toggleElement = document.querySelector('[data-js-selector="mfa-help-text-toggle"]');
    const mfaHelpText = document.querySelector('[data-js-selector="mfa-help-text"]');

    toggleElement.addEventListener('click', (e) => {
      e.preventDefault();
      mfaHelpText.classList.remove('hidden');
      toggleElement.classList.add('hidden');
      container.classList.remove('mfa-token--margin-bottom');
    })

  </script>
{% endblock %}
