{% extends 'admin/base_site.html' %}
{% load admin_urls %}
{% load static %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">Home</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
&rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
&rsaquo; Import
</div>

{% endblock %}

{% block content %}

    <form action="" method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <p>
        Things to know:
        <ul>
          <li>
            <span style="color: red; font-weight: bold; font-size: 1.5em">&#9888;</span> All existing languages will be <b>deleted</b> before the import
          </li>
          <li>
            New translation/transcription services will be created if they do not exist already
          </li>
        </ul>
      </p>

      <p>
        This importer expects the following fields:
        <code>name, code, featured</code>, followed by translation/transcription services.<br>
        <ul>
          <li>Translation service columns should be prefixed with <code>asr_</code> followed by the service code</li>
          <li>Transcription service columns should be prefixed with <code>mt_</code> followed by the service code</li>
        </ul>
        E.g.:
      </p>

      <table>
        <thead>
          <tr>
            <th style="text-transform: lowercase">name</th>
            <th style="text-transform: lowercase">code</th>
            <th style="text-transform: lowercase">featured</th>
            <th style="text-transform: lowercase">asr_goog</th>
            <th style="text-transform: lowercase">mt_goog</th>
            <th style="text-transform: lowercase">asr_msft</th>
            <th style="text-transform: lowercase">mt_msft</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>English</th>
            <th>en</th>
            <th>1</th>
            <th>en</th>
            <th>en</th>
            <th>en</th>
            <th>en</th>
          </tr>
          <tr>
            <th>Hebrew</th>
            <th>he</th>
            <th>0</th>
            <th>iw</th>
            <th>iw</th>
            <th></th>
            <th></th>
          </tr>
        </tbody>
      </table>

      <fieldset class="module aligned" style="margin-top: 2em">
        {% for field in form %}
          <div class="form-row">
            {{ field.errors }}

            {{ field.label_tag }}

            {{ field }}

            {% if field.field.help_text %}
            <p class="help">{{ field.field.help_text|safe }}</p>
            {% endif %}
          </div>
        {% endfor %}
      </fieldset>

      <div class="submit-row">
        <input type="submit" class="default" value="Submit">
      </div>
    </form>

    {% if results %}
      <table>
        <tr>
          <td>Imported languages:</td><td>{{ results.created }}</td>
        </tr>
        <tr>
          <td>Imported transcription services:</td><td>{{ results.transcription_services }}</td>
        </tr>
        <tr>
          <td>Imported translation services:</td><td>{{ results.translation_services }}</td>
        </tr>
        <tr>
          <td>Skipped rows:</td><td>{{ results.skipped }}</td>
        </tr>
      </table>
    {% endif %}

{% endblock %}
